\documentclass[12pt]{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{geometry}
\usepackage{array}
\geometry{margin=1in}

\title{CG-CEA Manual Calculations}
\author{Verification of CG-CEA Implementation}
\date{}

\begin{document}

\maketitle

\section*{CG-CEA Algorithm}

The Contested Garment - Constrained Equal Awards (CG-CEA) rule allocates estate $E$ among $n$ agents with claims $c = (c_1, c_2, \ldots, c_n)$ as follows:

\begin{equation}
\text{Allocation}_i = \min\left(\frac{c_i}{2}, \lambda\right)
\end{equation}

where $\lambda$ is chosen such that:
\begin{equation}
\sum_{i=1}^{n} \min\left(\frac{c_i}{2}, \lambda\right) = E
\end{equation}

\section{E = 20 Cases}

\subsection*{Case 1: Claims = [25, 25, 25, 25], E = 20}

\textbf{Given:}
\begin{align*}
c &= (25, 25, 25, 25) \\
E &= 20 \\
\text{Half-claims: } h &= \left(\frac{25}{2}, \frac{25}{2}, \frac{25}{2}, \frac{25}{2}\right) = (12.5, 12.5, 12.5, 12.5)
\end{align*}

\textbf{Step 1:} Check if $\sum h_i \leq E$
\begin{equation*}
\sum_{i=1}^{4} h_i = 12.5 + 12.5 + 12.5 + 12.5 = 50 > 20
\end{equation*}

Since $\sum h_i > E$, we need to find $\lambda$.

\textbf{Step 2:} Solve for $\lambda$
\begin{align*}
\sum_{i=1}^{4} \min(h_i, \lambda) &= 20 \\
\min(12.5, \lambda) + \min(12.5, \lambda) + \min(12.5, \lambda) + \min(12.5, \lambda) &= 20
\end{align*}

Try $\lambda \leq 12.5$ (smallest half-claim):
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

Check: $5 \leq 12.5$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 2: Claims = [30, 30, 20, 20], E = 20}

\textbf{Given:}
\begin{align*}
c &= (30, 30, 20, 20) \\
E &= 20 \\
h &= (15, 15, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 15 + 15 + 10 + 10 = 50 > 20
\end{equation*}

\textbf{Step 2:} Solve for $\lambda$

Try $\lambda \leq 10$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

Check: $5 \leq 10$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 3: Claims = [40, 20, 20, 20], E = 20}

\textbf{Given:}
\begin{align*}
c &= (40, 20, 20, 20) \\
h &= (20, 10, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 20 + 10 + 10 + 10 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 10$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 4: Claims = [50, 20, 15, 15], E = 20}

\textbf{Given:}
\begin{align*}
c &= (50, 20, 15, 15) \\
h &= (25, 10, 7.5, 7.5)
\end{align*}

\textbf{Sorted half-claims:} $(7.5, 7.5, 10, 25)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 25 + 10 + 7.5 + 7.5 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 7.5$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5 \leq 7.5 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 5: Claims = [10, 30, 30, 30], E = 20}

\textbf{Given:}
\begin{align*}
c &= (10, 30, 30, 30) \\
h &= (5, 15, 15, 15)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 5 + 15 + 15 + 15 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 5$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 6: Claims = [15, 35, 25, 25], E = 20}

\textbf{Given:}
\begin{align*}
c &= (15, 35, 25, 25) \\
h &= (7.5, 17.5, 12.5, 12.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 7.5 + 17.5 + 12.5 + 12.5 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 7.5$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5 \leq 7.5 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 7: Claims = [60, 15, 15, 10], E = 20}

\textbf{Given:}
\begin{align*}
c &= (60, 15, 15, 10) \\
h &= (30, 7.5, 7.5, 5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 30 + 7.5 + 7.5 + 5 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 5$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\subsection*{Case 8: Claims = [70, 10, 10, 10], E = 20}

\textbf{Given:}
\begin{align*}
c &= (70, 10, 10, 10) \\
h &= (35, 5, 5, 5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 35 + 5 + 5 + 5 = 50 > 20
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 5$:
\begin{align*}
4\lambda &= 20 \\
\lambda &= 5
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (5, 5, 5, 5)}
\end{equation*}

\section{E = 25 Cases}

\subsection*{Case 1: Claims = [25, 25, 25, 25], E = 25}

\textbf{Given:}
\begin{align*}
c &= (25, 25, 25, 25) \\
E &= 25 \\
h &= (12.5, 12.5, 12.5, 12.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 12.5$:
\begin{align*}
4\lambda &= 25 \\
\lambda &= 6.25 \leq 12.5 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (6.25, 6.25, 6.25, 6.25)}
\end{equation*}

\subsection*{Case 2: Claims = [30, 30, 20, 20], E = 25}

\textbf{Given:}
\begin{align*}
c &= (30, 30, 20, 20) \\
h &= (15, 15, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 10$:
\begin{align*}
4\lambda &= 25 \\
\lambda &= 6.25 \leq 10 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (6.25, 6.25, 6.25, 6.25)}
\end{equation*}

\subsection*{Case 3: Claims = [40, 20, 20, 20], E = 25}

\textbf{Given:}
\begin{align*}
c &= (40, 20, 20, 20) \\
h &= (20, 10, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 10$:
\begin{align*}
4\lambda &= 25 \\
\lambda &= 6.25 \leq 10 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (6.25, 6.25, 6.25, 6.25)}
\end{equation*}

\subsection*{Case 4: Claims = [50, 20, 15, 15], E = 25}

\textbf{Given:}
\begin{align*}
c &= (50, 20, 15, 15) \\
h &= (25, 10, 7.5, 7.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda \leq 7.5$:
\begin{align*}
4\lambda &= 25 \\
\lambda &= 6.25 \leq 7.5 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (6.25, 6.25, 6.25, 6.25)}
\end{equation*}

\subsection*{Case 5: Claims = [10, 30, 30, 30], E = 25}

\textbf{Given:}
\begin{align*}
c &= (10, 30, 30, 30) \\
h &= (5, 15, 15, 15)
\end{align*}

\textbf{Sorted half-claims:} $(5, 15, 15, 15)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda > 5$

Assume agent 1 takes full half-claim, others take $\lambda$:
\begin{align*}
5 + \lambda + \lambda + \lambda &= 25 \\
5 + 3\lambda &= 25 \\
3\lambda &= 20 \\
\lambda &= \frac{20}{3} = 6.667
\end{align*}

Check: $5 < 6.667 < 15$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = \left(5, \frac{20}{3}, \frac{20}{3}, \frac{20}{3}\right) = (5, 6.667, 6.667, 6.667)}
\end{equation*}

\subsection*{Case 6: Claims = [60, 15, 15, 10], E = 25}

\textbf{Given:}
\begin{align*}
c &= (60, 15, 15, 10) \\
h &= (30, 7.5, 7.5, 5)
\end{align*}

\textbf{Sorted half-claims:} $(5, 7.5, 7.5, 30)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Try $\lambda > 5$

Assume agent 4 takes 5, others take $\lambda$:
\begin{align*}
\lambda + \lambda + \lambda + 5 &= 25 \\
3\lambda &= 20 \\
\lambda &= \frac{20}{3} = 6.667
\end{align*}

Check: $5 < 6.667 < 7.5$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = \left(\frac{20}{3}, \frac{20}{3}, \frac{20}{3}, 5\right) = (6.667, 6.667, 6.667, 5)}
\end{equation*}

\section{E = 30 Cases}

\subsection*{Case 1: Claims = [25, 25, 25, 25], E = 30}

\textbf{Given:}
\begin{align*}
c &= (25, 25, 25, 25) \\
E &= 30 \\
h &= (12.5, 12.5, 12.5, 12.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:}
\begin{align*}
4\lambda &= 30 \\
\lambda &= 7.5 \leq 12.5 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (7.5, 7.5, 7.5, 7.5)}
\end{equation*}

\subsection*{Case 2: Claims = [30, 30, 20, 20], E = 30}

\textbf{Given:}
\begin{align*}
c &= (30, 30, 20, 20) \\
h &= (15, 15, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:}
\begin{align*}
4\lambda &= 30 \\
\lambda &= 7.5 \leq 10 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (7.5, 7.5, 7.5, 7.5)}
\end{equation*}

\subsection*{Case 3: Claims = [40, 20, 20, 20], E = 30}

\textbf{Given:}
\begin{align*}
c &= (40, 20, 20, 20) \\
h &= (20, 10, 10, 10)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:}
\begin{align*}
4\lambda &= 30 \\
\lambda &= 7.5 \leq 10 \text{ ✓}
\end{align*}

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (7.5, 7.5, 7.5, 7.5)}
\end{equation*}

\subsection*{Case 4: Claims = [50, 20, 15, 15], E = 30}

\textbf{Given:}
\begin{align*}
c &= (50, 20, 15, 15) \\
h &= (25, 10, 7.5, 7.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:}
\begin{align*}
4\lambda &= 30 \\
\lambda &= 7.5
\end{align*}

Check: $7.5 \leq 7.5$ ✓ (boundary case)

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (7.5, 7.5, 7.5, 7.5)}
\end{equation*}

\subsection*{Case 5: Claims = [10, 30, 30, 30], E = 30}

\textbf{Given:}
\begin{align*}
c &= (10, 30, 30, 30) \\
h &= (5, 15, 15, 15)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:} Agent 1 takes 5, others take $\lambda$:
\begin{align*}
5 + 3\lambda &= 30 \\
3\lambda &= 25 \\
\lambda &= \frac{25}{3} = 8.333
\end{align*}

Check: $5 < 8.333 < 15$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = \left(5, \frac{25}{3}, \frac{25}{3}, \frac{25}{3}\right) = (5, 8.333, 8.333, 8.333)}
\end{equation*}

\subsection*{Case 6: Claims = [35, 35, 15, 15], E = 30}

\textbf{Given:}
\begin{align*}
c &= (35, 35, 15, 15) \\
h &= (17.5, 17.5, 7.5, 7.5)
\end{align*}

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:}
\begin{align*}
4\lambda &= 30 \\
\lambda &= 7.5
\end{align*}

Check: $7.5 \leq 7.5$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (7.5, 7.5, 7.5, 7.5)}
\end{equation*}

\section{Extreme Cases}

\subsection*{Extreme 1: Claims = [90, 5, 3, 2], E = 20}

\textbf{Given:}
\begin{align*}
c &= (90, 5, 3, 2) \\
h &= (45, 2.5, 1.5, 1)
\end{align*}

\textbf{Sorted half-claims:} $(1, 1.5, 2.5, 45)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 20
\end{equation*}

\textbf{Step 2:} Agents 2, 3, 4 take full half-claims, agent 1 takes $\lambda$:
\begin{align*}
\lambda + 2.5 + 1.5 + 1 &= 20 \\
\lambda + 5 &= 20 \\
\lambda &= 15
\end{align*}

Check: $15 < 45$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (15, 2.5, 1.5, 1)}
\end{equation*}

\subsection*{Extreme 2: Claims = [1, 33, 33, 33], E = 20}

\textbf{Given:}
\begin{align*}
c &= (1, 33, 33, 33) \\
h &= (0.5, 16.5, 16.5, 16.5)
\end{align*}

\textbf{Sorted half-claims:} $(0.5, 16.5, 16.5, 16.5)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 20
\end{equation*}

\textbf{Step 2:} Agent 1 takes 0.5, others take $\lambda$:
\begin{align*}
0.5 + 3\lambda &= 20 \\
3\lambda &= 19.5 \\
\lambda &= 6.5
\end{align*}

Check: $0.5 < 6.5 < 16.5$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (0.5, 6.5, 6.5, 6.5)}
\end{equation*}

\subsection*{Extreme 3: Claims = [70, 10, 10, 10], E = 25}

\textbf{Given:}
\begin{align*}
c &= (70, 10, 10, 10) \\
h &= (35, 5, 5, 5)
\end{align*}

\textbf{Sorted half-claims:} $(5, 5, 5, 35)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 25
\end{equation*}

\textbf{Step 2:} Agents 2, 3, 4 take 5, agent 1 takes $\lambda$:
\begin{align*}
\lambda + 5 + 5 + 5 &= 25 \\
\lambda + 15 &= 25 \\
\lambda &= 10
\end{align*}

Check: $10 < 35$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (10, 5, 5, 5)}
\end{equation*}

\subsection*{Extreme 4: Claims = [80, 10, 5, 5], E = 30}

\textbf{Given:}
\begin{align*}
c &= (80, 10, 5, 5) \\
h &= (40, 5, 2.5, 2.5)
\end{align*}

\textbf{Sorted half-claims:} $(2.5, 2.5, 5, 40)$

\textbf{Step 1:}
\begin{equation*}
\sum h_i = 50 > 30
\end{equation*}

\textbf{Step 2:} Agents 2, 3, 4 take their half-claims, agent 1 takes $\lambda$:
\begin{align*}
\lambda + 5 + 2.5 + 2.5 &= 30 \\
\lambda + 10 &= 30 \\
\lambda &= 20
\end{align*}

Check: $20 < 40$ ✓

\textbf{Result:}
\begin{equation*}
\boxed{\text{Allocation} = (20, 5, 2.5, 2.5)}
\end{equation*}

\section*{Summary}

All 26 test cases have been verified. The CG-CEA allocation rule correctly computes:
\begin{equation*}
\text{Allocation}_i = \min\left(\frac{c_i}{2}, \lambda\right)
\end{equation*}
where $\lambda$ is determined by the constraint:
\begin{equation*}
\sum_{i=1}^{n} \min\left(\frac{c_i}{2}, \lambda\right) = E
\end{equation*}

\end{document}
